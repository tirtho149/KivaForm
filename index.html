<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sustainability Communication Assessment</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    // Lucide Icons as inline SVG
    const AlertCircle = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
    );

    const CheckCircle = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
    );

    const Loader2 = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="animate-spin">
        <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
      </svg>
    );

    const SustainabilityForm = () => {
      const [formData, setFormData] = useState({
        communicationStyle: '',
        economicCredibility: '',
        environmentalCredibility: '',
        socialCredibility: '',
        economicEmotional: '',
        environmentalEmotional: '',
        socialEmotional: '',
        economicLogic: '',
        environmentalLogic: '',
        socialLogic: '',
        economicTiming: '',
        environmentalTiming: '',
        socialTiming: ''
      });

      const [status, setStatus] = useState({ type: '', message: '' });
      const [isSubmitting, setIsSubmitting] = useState(false);

      // CONFIGURE THIS: Replace with your GitHub repository details
      const GITHUB_REPO_OWNER = 'tirtho149';  // e.g., 'tirtho149'
      const GITHUB_REPO_NAME = 'KivaForm';         // e.g., 'sustainability-form'

      const communicationStyles = {
        'Credibility': 'Appeals based on source expertise, trustworthiness, and authority',
        'Emotional appeal': 'Appeals to emotions, values, and personal connections',
        'Logic': 'Appeals based on rational arguments, data, and evidence',
        'Timing': 'Strategic timing of message delivery for maximum impact'
      };

      const sustainabilityCategories = {
        'Economic': 'Financial viability, cost-effectiveness, and economic benefits',
        'Environmental': 'Ecological impact, resource conservation, and environmental protection',
        'Social': 'Community welfare, equity, and social responsibility'
      };

      const ratingDescriptions = {
        '1': 'Very Weak',
        '2': 'Weak',
        '3': 'Strong',
        '4': 'Very Strong'
      };

      const handleChange = (field, value) => {
        setFormData(prev => ({ ...prev, [field]: value }));
      };

      const handleSubmit = async () => {
        setIsSubmitting(true);
        setStatus({ type: '', message: '' });

        // Validate all fields are filled
        const emptyFields = Object.entries(formData).filter(([_, value]) => !value);
        if (emptyFields.length > 0) {
          setStatus({ 
            type: 'error', 
            message: 'Please fill in all fields before submitting.' 
          });
          setIsSubmitting(false);
          return;
        }

        try {
          const submission = {
            timestamp: new Date().toISOString(),
            communicationStyle: formData.communicationStyle,
            ratings: {
              credibility: {
                economic: formData.economicCredibility,
                environmental: formData.environmentalCredibility,
                social: formData.socialCredibility
              },
              emotionalAppeal: {
                economic: formData.economicEmotional,
                environmental: formData.environmentalEmotional,
                social: formData.socialEmotional
              },
              logic: {
                economic: formData.economicLogic,
                environmental: formData.environmentalLogic,
                social: formData.socialLogic
              },
              timing: {
                economic: formData.economicTiming,
                environmental: formData.environmentalTiming,
                social: formData.socialTiming
              }
            }
          };

          // Create GitHub Issue with submission data
          const issueTitle = `Form Submission - ${new Date().toLocaleString()}`;
          const issueBody = '```json\n' + JSON.stringify(submission, null, 2) + '\n```';
          
          const response = await fetch(`https://api.github.com/repos/${GITHUB_REPO_OWNER}/${GITHUB_REPO_NAME}/issues`, {
            method: 'POST',
            headers: {
              'Accept': 'application/vnd.github.v3+json',
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              title: issueTitle,
              body: issueBody,
              labels: ['form-submission']
            })
          });

          if (!response.ok) {
            throw new Error('Submission failed');
          }

          const result = await response.json();

          setStatus({ 
            type: 'success', 
            message: `Form submitted successfully! Your response has been recorded. Track it here: ${result.html_url}` 
          });
          
          // Reset form
          setFormData({
            communicationStyle: '',
            economicCredibility: '',
            environmentalCredibility: '',
            socialCredibility: '',
            economicEmotional: '',
            environmentalEmotional: '',
            socialEmotional: '',
            economicLogic: '',
            environmentalLogic: '',
            socialLogic: '',
            economicTiming: '',
            environmentalTiming: '',
            socialTiming: ''
          });

        } catch (error) {
          setStatus({ 
            type: 'error', 
            message: 'Failed to submit form. Please make sure you have configured the GitHub repository details in the code.' 
          });
        } finally {
          setIsSubmitting(false);
        }
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4 md:p-8">
          <div className="max-w-5xl mx-auto bg-white rounded-xl shadow-lg p-6 md:p-8">
            <h1 className="text-3xl font-bold text-gray-800 mb-2">
              Sustainability Communication Assessment
            </h1>
            <p className="text-gray-600 mb-8">
              Rate the effectiveness of communication strategies across different sustainability dimensions
            </p>

            <div className="space-y-8">
              {/* Communication Style Selection */}
              <div className="bg-blue-50 p-6 rounded-lg">
                <label className="block text-lg font-semibold text-gray-800 mb-3">
                  Communication Style
                </label>
                <select
                  value={formData.communicationStyle}
                  onChange={(e) => handleChange('communicationStyle', e.target.value)}
                  className="w-full p-3 border-2 border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                >
                  <option value="">Select a communication style...</option>
                  {Object.entries(communicationStyles).map(([style, description]) => (
                    <option key={style} value={style} title={description}>
                      {style} - {description}
                    </option>
                  ))}
                </select>
              </div>

              {/* Rating Grid */}
              <div className="overflow-x-auto">
                <table className="w-full border-collapse">
                  <thead>
                    <tr className="bg-gray-100">
                      <th className="border-2 border-gray-300 p-4 text-left font-semibold">
                        Assessment Category
                      </th>
                      {Object.entries(sustainabilityCategories).map(([category, description]) => (
                        <th key={category} className="border-2 border-gray-300 p-4 text-center">
                          <div className="font-semibold mb-1">{category}</div>
                          <div className="text-xs font-normal text-gray-600">{description}</div>
                        </th>
                      ))}
                    </tr>
                  </thead>
                  <tbody>
                    {/* Credibility Row */}
                    <tr className="hover:bg-gray-50">
                      <td className="border-2 border-gray-300 p-4 font-medium">
                        <div>Credibility</div>
                        <div className="text-xs text-gray-600 mt-1">
                          Rate 1-4 (1=Very Weak, 4=Very Strong)
                        </div>
                      </td>
                      {['economic', 'environmental', 'social'].map((category) => (
                        <td key={category} className="border-2 border-gray-300 p-4">
                          <select
                            value={formData[`${category}Credibility`]}
                            onChange={(e) => handleChange(`${category}Credibility`, e.target.value)}
                            className="w-full p-2 border-2 border-gray-200 rounded focus:ring-2 focus:ring-blue-500"
                          >
                            <option value="">Select...</option>
                            {Object.entries(ratingDescriptions).map(([value, label]) => (
                              <option key={value} value={value}>{value} - {label}</option>
                            ))}
                          </select>
                        </td>
                      ))}
                    </tr>

                    {/* Emotional Appeal Row */}
                    <tr className="hover:bg-gray-50">
                      <td className="border-2 border-gray-300 p-4 font-medium">
                        <div>Emotional Appeal</div>
                        <div className="text-xs text-gray-600 mt-1">
                          Rate 1-4 (1=Very Weak, 4=Very Strong)
                        </div>
                      </td>
                      {['economic', 'environmental', 'social'].map((category) => (
                        <td key={category} className="border-2 border-gray-300 p-4">
                          <select
                            value={formData[`${category}Emotional`]}
                            onChange={(e) => handleChange(`${category}Emotional`, e.target.value)}
                            className="w-full p-2 border-2 border-gray-200 rounded focus:ring-2 focus:ring-blue-500"
                          >
                            <option value="">Select...</option>
                            {Object.entries(ratingDescriptions).map(([value, label]) => (
                              <option key={value} value={value}>{value} - {label}</option>
                            ))}
                          </select>
                        </td>
                      ))}
                    </tr>

                    {/* Logic Row */}
                    <tr className="hover:bg-gray-50">
                      <td className="border-2 border-gray-300 p-4 font-medium">
                        <div>Logic</div>
                        <div className="text-xs text-gray-600 mt-1">
                          Rate 1-4 (1=Very Weak, 4=Very Strong)
                        </div>
                      </td>
                      {['economic', 'environmental', 'social'].map((category) => (
                        <td key={category} className="border-2 border-gray-300 p-4">
                          <select
                            value={formData[`${category}Logic`]}
                            onChange={(e) => handleChange(`${category}Logic`, e.target.value)}
                            className="w-full p-2 border-2 border-gray-200 rounded focus:ring-2 focus:ring-blue-500"
                          >
                            <option value="">Select...</option>
                            {Object.entries(ratingDescriptions).map(([value, label]) => (
                              <option key={value} value={value}>{value} - {label}</option>
                            ))}
                          </select>
                        </td>
                      ))}
                    </tr>

                    {/* Timing Row */}
                    <tr className="hover:bg-gray-50">
                      <td className="border-2 border-gray-300 p-4 font-medium">
                        <div>Timing</div>
                        <div className="text-xs text-gray-600 mt-1">
                          Rate 1-4 (1=Very Weak, 4=Very Strong)
                        </div>
                      </td>
                      {['economic', 'environmental', 'social'].map((category) => (
                        <td key={category} className="border-2 border-gray-300 p-4">
                          <select
                            value={formData[`${category}Timing`]}
                            onChange={(e) => handleChange(`${category}Timing`, e.target.value)}
                            className="w-full p-2 border-2 border-gray-200 rounded focus:ring-2 focus:ring-blue-500"
                          >
                            <option value="">Select...</option>
                            {Object.entries(ratingDescriptions).map(([value, label]) => (
                              <option key={value} value={value}>{value} - {label}</option>
                            ))}
                          </select>
                        </td>
                      ))}
                    </tr>
                  </tbody>
                </table>
              </div>

              {/* Status Messages */}
              {status.message && (
                <div className={`flex items-start gap-2 p-4 rounded-lg ${
                  status.type === 'success' ? 'bg-green-50 text-green-800' : 'bg-red-50 text-red-800'
                }`}>
                  <div className="flex-shrink-0 mt-0.5">
                    {status.type === 'success' ? <CheckCircle /> : <AlertCircle />}
                  </div>
                  <span className="break-words">{status.message}</span>
                </div>
              )}

              {/* Submit Button */}
              <button
                onClick={handleSubmit}
                disabled={isSubmitting}
                className="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
              >
                {isSubmitting ? (
                  <>
                    <Loader2 />
                    Submitting...
                  </>
                ) : (
                  'Submit Assessment'
                )}
              </button>
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<SustainabilityForm />, document.getElementById('root'));
  </script>
</body>
</html>
